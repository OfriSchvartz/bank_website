<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reset Password</title>
  <link rel="stylesheet" href="../static/styles.css">
  <script>
    function validateResetForm() {
      const email = document.getElementById("email").value;
      const id = document.getElementById("id").value;
      
      // Clear previous error messages
      clearErrorMessages();
      
      let isValid = true;
      
      // Validate ID
      if (id === "") {
        showError("id", "Please enter your ID number");
        isValid = false;
      } else if (id.length !== 9 || !/^\d{9}$/.test(id)) {
        showError("id", "ID must be exactly 9 digits");
        isValid = false;
      }
      
      // Validate Email
      if (email === "") {
        showError("email", "Please enter your email address");
        isValid = false;
      } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showError("email", "Please enter a valid email address");
        isValid = false;
      }
      
      if (isValid) {
        // Simulate sending reset email
        alert("Password reset instructions have been sent to your email address.");
        // In a real application, you would send an API request here
        // For now, redirect back to login
        setTimeout(() => {
          window.location.href = "login.html";
        }, 2000);
      }
      
      return false; // Prevent form submission
    }
    
    function showError(fieldId, message) {
      const field = document.getElementById(fieldId);
      const formRow = field.closest('.form-row');
      
      // Add error class to field
      field.classList.add('invalid');
      
      // Create error message element
      const errorDiv = document.createElement('div');
      errorDiv.className = 'error-message';
      errorDiv.textContent = message;
      errorDiv.id = fieldId + '-error';
      
      // Add error message to form row
      formRow.appendChild(errorDiv);
    }
    
    function clearErrorMessages() {
      // Remove all error messages
      const errorMessages = document.querySelectorAll('.error-message');
      errorMessages.forEach(error => error.remove());
      
      // Remove invalid class from all fields
      const invalidFields = document.querySelectorAll('.invalid');
      invalidFields.forEach(field => field.classList.remove('invalid'));
    }
    
    function clearFieldError(fieldId) {
      const field = document.getElementById(fieldId);
      const errorMessage = document.getElementById(fieldId + '-error');
      
      if (errorMessage) {
        errorMessage.remove();
      }
      field.classList.remove('invalid');
    }
  </script>
</head>
<body>
  <form id="resetPasswordForm" class="form" novalidate autocomplete="off">
    <h1 class="form-title" id="resetTitle">Reset Password</h1>
    
    <div class="login-container" id="logoContainer">
      <img class="logo" src="../images/bank.jpg" alt="Bank Logo" title="Bank Logo" id="bankLogo">
    </div>
    
    <p class="form-description" id="resetDescription">
      Enter your ID number and email address to receive password reset instructions.
    </p>

    <div class="form-row" id="idRow">
      <label for="id" class="required">ID Number</label>
      <input
        id="id" 
        name="id" 
        type="text" 
        placeholder="Enter your 9-digit ID number"
        maxlength="9"
        title="Enter your 9-digit ID number"
        oninput="clearFieldError('id')">
    </div>

    <div class="form-row" id="emailRow">
      <label for="email" class="required">Email Address</label>
      <input
        id="email" 
        name="email" 
        type="email" 
        placeholder="Enter your registered email"
        title="Enter the email address associated with your account"
        oninput="clearFieldError('email')">
    </div>

    <button type="button" onclick="validateResetForm()" class="btn-primary" id="resetBtn">
      Send Reset Instructions
    </button>
    
    <div class="form-actions" id="formActions">
      <p class="form-footer" id="resetFooter">
        Remember your password? <a href="login.html" id="loginLink">Back to Login</a><br>
        Need to create an account? <a href="register.html" id="registerLink">Register here</a>
      </p>
    </div>
  </form>
</body>
</html>