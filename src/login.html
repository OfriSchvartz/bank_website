<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Login</title>
  <link rel="stylesheet" href="../style/styles.css">
</head>
<body>
  <form id="loginForm" class="form" novalidate autocomplete="off">
    <h1 class="form-title">Login</h1>

    <div class="form-row">
      <label for="id" class="required">ID Number</label>
      <input
        id="id"
        name="id"
        type="text"
        placeholder="Enter your ID number"
        required
        pattern="\d{9}"
        minlength="9"
        maxlength="9"
        title="Must be exactly 9 digits"
      >
    </div>

    <div class="form-row">
      <label for="password" class="required">Password</label>
      <input
        id="password"
        name="password"
        type="password"
        placeholder="Enter your password"
        required
        minlength="8"
        maxlength="16"
        title="1–8 characters"
      >
    </div>

    
    <div class="form-row form-checkbox">
        <input id="rememberMe" name="rememberMe" type="checkbox">
        <label for="rememberMe">Remember Me</label>
    </div>


    <button type="submit" class="btn-primary">Login</button>

    <p class="form-footer">
      Don’t have an account? <a href="register.html">Register here</a><br>
      Forgot your password? <a href="forgot_password.html">Reset Password</a>
    </p>
  </form>

  <script>
    const form = document.getElementById('loginForm');

    form.addEventListener('submit', e => {
      e.preventDefault();
      // clear old messages
      form.querySelectorAll('.error-message').forEach(el => el.remove());

      let valid = true;
      form.querySelectorAll('input[required]').forEach(input => {
        if (!input.checkValidity()) {
          valid = false;
          const msg = input.validationMessage;
          const popup = document.createElement('span');
          popup.className = 'error-message';
          popup.textContent = msg;
          input.classList.add('invalid');
          input.parentElement.append(popup);
        } else {
          input.classList.remove('invalid');
        }
      });

      if (valid) {
        form.submit();
      }
    });

    // remove error when corrected
    form.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', () => {
        if (input.classList.contains('invalid') && input.checkValidity()) {
          input.classList.remove('invalid');
          const pop = input.parentElement.querySelector('.error-message');
          if (pop) pop.remove();
        }
      });
    });
  </script>
</body>
</html>
